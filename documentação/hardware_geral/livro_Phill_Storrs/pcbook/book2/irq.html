<HTML>

<!-- Mirrored from philipstorr.id.au/pcbook/book2/irq.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 18 Oct 2022 15:11:43 GMT -->
<HEAD>
<TITLE>The PC and interrupts</TITLE>
</HEAD>
<BODY>
<IMG SRC=../images/pc2.jpg ALIGN=RIGHT>
<H2>Phil Storrs PC Hardware book</H2>

<H3>The PC and Interrupts</H3>

We are all confronted with interruptions from time to time. Some are pleasant, some are unpleasant and some are neutral. You can ignore some interruptions, for example a telephone or doorbell ringing, some must not be ignored, such as getting a flat tire on the freeway - you must deal with them as soon as possible. The alternative to a system with Interrupts is to use Polling, a system where we must look at each device periodically to see if our services are required. Imagine having a telephone without a bell, you would have to lift the receiver regularly to see if anyone was on the line.
<P>
Whatever their cause, interrupts are essentially requests for attention. In the same way, peripherals in a computer system can request the attention of the processor. The event that makes a microprocessor stop executing one routine to perform some other routine to service a request, is called an <STRONG>INTERRUPT.</STRONG>
<P>
Interrupts increase the overall efficiency of  a computer system, because the external devices request the attention of the processor as needed. If a system had no interrupts, the processor would have to <STRONG>POLL</STRONG> every device in the system periodically, to see if any of them required attention. Many of the standard I/O provisions of the PC computer generate interrupts when they need the processor to process data being received by, or being sent by, those interfaces.
<P>
The processor can process two kinds of interrupts, those it can ignore and those it must service as soon as  they occur. Interrupts can be generated by the <STRONG>interfaces to DEVICES</STRONG>, such as disk drives and the parallel or serial ports, or internally, by interrupt-generating <STRONG>machine code INSTRUCTIONS.</STRONG>
      
<H3>Types of Interrupts.</H3>
<UL>
<LI><STRONG>HARDWARE</STRONG> interrupts are generated by DEVICES, these devices can be chips on the system board or they can be chips on cards plugged into the computers external I/O bus slots. The 8086 family of processors have two hardware interrupt inputs. 
<UL>
<LI>The <STRONG>Interrupt Request</STRONG> (IRQ), an interrupt that can be delayed if the processor is busy with some more important process.
<LI>The <STRONG>Non Maskable Interrupt</STRONG> (NMI) an interrupt that must be processed when it occurs.
</UL>
<P>
<LI><STRONG>SOFTWARE</STRONG> interrupts are generated by machine code instructions within programs.
</UL>
<P>
The 8086 family of microprocessors can recognise 256 different interrupts, each with a unique TYPE CODE (number) that identifies it to the microprocessor. The processor uses this type code (a number between 0 hex and FF hex) to point to a location in an <STRONG>INTERRUPT VECTOR TABLE</STRONG>. This table is stored in the first 1024 bytes of the memory space, starting at address 00000 hex, (0000:0000 hex in Segment and Offset format). 

<H4>The Interrupt Vector Table</H4>
The INTERRUPT VECTOR TABLE points to the locations of the <STRONG>INTERRUPT ROUTINES</STRONG> that carry out the functions associated with the interrupts. As the old 8086/8088 processors had a total memory space of one Meg. byte, these vectors must point to 20 bit address  - this requires the use of SEGMENT and OFFSET  address format and hence, each vector is FOUR BYTES long.
<P>
The Interrupt Vector Table is in the first 1024 bytes of the processors address-able memory space. The POST routines in the BIOS set up an Interrupt Vector Table at the time of boot-up with the addresses of the routines supplied by the code in the BIOS ROM and DOS and our Application programs add there vectors to this table as they are loaded.

<H3>HARDWARE INTERRUPT REQUEST'S - the IRQ's</H3>
DOS computers make extensive use of Interrupts to provide basic services to Devices and to DOS and Application programs. The Hardware interrupts are provided by 8259 interrupt controller chips. These chips have eight prioritized IRQ inputs and they alert the processor of an interrupt via it's own single IRQ input line. The 8259 chip expands the processors single IRQ input.
<P>
The original IBM XT computer had <STRONG>one 8259 device</STRONG> and this provided <STRONG>eight IRQ inputs</STRONG>. The first two of these IRQ lines is wired to functions on the system board and the rest are available on the Bus Connector for use by external devices.
<P>
<STRONG>8 bit bus computers (8086/8088 based XT type)</STRONG><BR>
<PRE>
	<STRONG>IRQ 	Used for</STRONG>
	0	RAM REFRESH &amp; CLOCK TICK
	1	KEYBOARD INTERFACE
	2	EGA VIDEO (some interface cards have the option of using an IRQ) 
	3	COM2 (also COM4)
	4	COM1 (also COM3)
	5	HARD DISK (PC/XT type computer only)
	6	FLOPPY DISK
	7	PARALLEL PRINTER PORT LPT 1
</PRE>
<P>
<STRONG>ISA Bus (and MCA, EISA) computers (286, 386 and 486 based computers)</STRONG><P>
The AT computer added a second 8259 device and this provided a further seven IRQ inputs. The second device is cascaded into one of the inputs (IRQ2) on the first device and the Bus connector for the IRQ2 input is wired to IRQ9 on the second 8259 chip.
<P>
<PRE>
	<STRONG>IRQ	 Used for</STRONG>
	0	System timer
	1	Keyboard Interface
	2	Cascade for second IRQ controller - BUS connection is to IRQ 9.
	3	Serial port, COM2 (may also be COM4)
	4	Serial Port COM1 (may also be COM3)
	5	Parallel Port  LPT2, also the default for many Sound Cards (note 1)
	6	Floppy Disk Drive Interface
	7	Parallel Port LPT1 (note 2)
	8	Real Time Clock (RTC) 
	9	Available (some Video Display Interface cards have the option of using this IRQ)
	10	Available  (note 3)
	11	Available  (note 3)
	12	PS/2 - type mouse port (most modern system boards have a PS/2 mouse port fitted)
	13	Coprocessor 
	14	Primary IDE/ATA adaptor 
	15	Secondary IDE/ATA adaptor
</PRE>
<P>
<STRONG>Note 1:-</STRONG>  As very few systems have a second Parallel Port fitted, and a Parallel Port does not usually need it's IRQ, it is usually safe to assign IRQ 5 to a Sound Card or a Network Interface card. Along with IRQ10, this is a common default for Sound Cards.
<BR>
<STRONG>Note 2:- </STRONG>A Parallel Port does not usually need it's IRQ, so IRQ7 can be used for other uses (note 3).
<BR>
<STRONG>Note 3:- </STRONG> These IRQ lines can be used for:
<UL>
<LI>Sound Card
<LI>Network Interface Card, 
<LI>SCSI Interface card 
<LI>Tertiary and Quaternary EIDE Interface channels (note 4)
</UL>

<STRONG>Note 4:-</STRONG> Four EIDE interfaces are provided for by the latest PC hardware specifications, and these are configured as follows:-
<BR><BLOCKQUOTE>
<STRONG>Tertiary IDE adaptor</STRONG> at I/O address 01E8 to 01EF and using IRQ 11 or 12<BR>
<STRONG>Quaternary adaptor</STRONG> at I/O address 0168 to 016F and using IRQ 10 or 11<BR>
Some sound cards have a built-in IDE Interface configured as the Tertiary adaptor.
</BLOCKQUOTE>

<H3>Software Interrupts</H3>
Many of the basic I/O services required in a computer system are provided by Software Interrupts. All a programer has to do to make use of them is to put the appropriate values in some registers and then call the Interrupt Routine with an INT instruction.
<P>
Examine the <A HREF="intlist.html">list of Interrupts</A> in the table and pick out the Hardware and Software Interrupts.
<CENTER><P>
<table border="0" cellpadding="5" cellspacing="1" width="75%">
<tr>
<td width="25%" bgcolor="#FFD700" align="center"><a href="intlist.html">The list of standard Interrupt assignments</a></td>
<td width="25%" bgcolor="#FF6347" align="center"><a href="../index-2.html"><font
color="#FFFFFF">Back to the opening index</font></a></td>
<td width="25%" bgcolor="#FF6347" align="center"><a href="book2.html"><font
color="#FFFFFF">Book two index</font></a></td>
</tr>
</table>
<P></CENTER>
<HR>
Copyright &copy; Phil. Storr, last updated 26<SUP>th</SUP> December 1998
<HR>
</BODY>

<!-- Mirrored from philipstorr.id.au/pcbook/book2/irq.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 18 Oct 2022 15:11:43 GMT -->
</HTML>

